=================================================================
  ç»„åˆè£…ç”Ÿæˆå·¥å…· - Docker é•œåƒä½¿ç”¨è¯´æ˜
=================================================================

âœ… å·²å®Œæˆçš„å·¥ä½œ
-----------------------------------------------------------------

1. GitHub Actions è‡ªåŠ¨æ„å»º
   - å·¥ä½œæµæ–‡ä»¶ï¼š.github/workflows/build-and-push-docker.yml
   - è‡ªåŠ¨æ„å»ºä¸¤ä¸ªé•œåƒï¼šbackend å’Œ frontend
   - æ¨é€åˆ°ï¼šghcr.io/<ä½ çš„GitHubç”¨æˆ·å>/soybean-admin/

2. é•œåƒåœ°å€
   - åç«¯ï¼šghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/backend:latest
   - å‰ç«¯ï¼šghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/frontend:latest

3. æ–°å¢æ–‡æ¡£
   - DOCKERé•œåƒä½¿ç”¨æŒ‡å—.md - å®Œæ•´çš„é•œåƒä½¿ç”¨æ–‡æ¡£
   - é•œåƒå¿«é€Ÿå‚è€ƒ.md - å‘½ä»¤é€ŸæŸ¥è¡¨
   - æ–‡æ¡£å¯¼èˆª.md - æ‰€æœ‰æ–‡æ¡£çš„ç´¢å¼•
   - ä½¿ç”¨è¯´æ˜.md - ä¸­æ–‡ä½¿ç”¨æ•™ç¨‹

4. æ–°å¢é…ç½®æ–‡ä»¶
   - docker-compose.ghcr.yml - ä½¿ç”¨é¢„æ„å»ºé•œåƒçš„é…ç½®

=================================================================
ğŸ“¦ ä½¿ç”¨é¢„æ„å»ºé•œåƒçš„ä¸‰ç§æ–¹å¼
=================================================================

æ–¹å¼ä¸€ï¼šä½¿ç”¨ docker-composeï¼ˆæœ€ç®€å•ï¼‰
-----------------------------------------------------------------

1. ä¸‹è½½é…ç½®æ–‡ä»¶ï¼š
   wget https://raw.githubusercontent.com/<ä»“åº“åœ°å€>/docker-compose.ghcr.yml

2. ä¿®æ”¹é…ç½®ï¼š
   - å°† <YOUR_GITHUB_USERNAME> æ›¿æ¢ä¸ºä½ çš„ GitHub ç”¨æˆ·å
   
3. å¯åŠ¨æœåŠ¡ï¼š
   docker-compose -f docker-compose.ghcr.yml up -d

4. è®¿é—®æœåŠ¡ï¼š
   - APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
   - å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/api/health


æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ‹‰å–é•œåƒ
-----------------------------------------------------------------

1. æ‹‰å–é•œåƒï¼š
   docker pull ghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/backend:latest
   docker pull ghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/frontend:latest

2. è¿è¡Œå®¹å™¨ï¼š
   # åˆ›å»ºç½‘ç»œ
   docker network create combo-network
   
   # å¯åŠ¨MySQL
   docker run -d --name mysql --network combo-network \
     -e MYSQL_ROOT_PASSWORD=rootpass \
     -e MYSQL_DATABASE=combo_db \
     -e MYSQL_USER=combo_user \
     -e MYSQL_PASSWORD=combo_pass \
     mysql:8.0
   
   # å¯åŠ¨Redis
   docker run -d --name redis --network combo-network redis:7-alpine
   
   # å¯åŠ¨åç«¯
   docker run -d --name backend --network combo-network \
     -p 8000:8000 \
     -e DATABASE_URL=mysql+pymysql://combo_user:combo_pass@mysql:3306/combo_db \
     -e REDIS_URL=redis://redis:6379/0 \
     -e SECRET_KEY=your-secret-key \
     ghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/backend:latest


æ–¹å¼ä¸‰ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
-----------------------------------------------------------------

1. å…‹éš†ä»“åº“ï¼š
   git clone <ä»“åº“åœ°å€>
   cd <é¡¹ç›®ç›®å½•>
   git checkout feat-split-front-back-python-docker-mysql-redis

2. è¿è¡Œè„šæœ¬ï¼š
   chmod +x scripts/setup.sh
   ./scripts/setup.sh

=================================================================
ğŸ” é•œåƒè®¿é—®æƒé™
=================================================================

å…¬å¼€é•œåƒï¼ˆæ— éœ€è®¤è¯ï¼‰ï¼š
   ç›´æ¥æ‹‰å–å³å¯

ç§æœ‰é•œåƒï¼ˆéœ€è¦è®¤è¯ï¼‰ï¼š
   1. åˆ›å»º GitHub Token
      - è®¿é—®ï¼šhttps://github.com/settings/tokens
      - æƒé™ï¼šread:packages
   
   2. ç™»å½•åˆ° GHCR
      echo "YOUR_TOKEN" | docker login ghcr.io -u YOUR_USERNAME --password-stdin
   
   3. æ‹‰å–é•œåƒ
      docker pull ghcr.io/<ä½ çš„ç”¨æˆ·å>/soybean-admin/backend:latest

=================================================================
ğŸ“š è¯¦ç»†æ–‡æ¡£
=================================================================

1. å¿«é€Ÿå¼€å§‹
   - README.md - é¡¹ç›®ä¸»æ–‡æ¡£
   - QUICK_START.md - å¿«é€Ÿå…¥é—¨
   - é•œåƒå¿«é€Ÿå‚è€ƒ.md - å‘½ä»¤é€ŸæŸ¥è¡¨

2. Dockerç›¸å…³
   - DOCKERé•œåƒä½¿ç”¨æŒ‡å—.md - å®Œæ•´çš„é•œåƒæ–‡æ¡£
   - docker-compose.ghcr.yml - é•œåƒé…ç½®æ–‡ä»¶
   - docker-compose.yml - æœ¬åœ°æ„å»ºé…ç½®
   - docker-compose.dev.yml - å¼€å‘ç¯å¢ƒé…ç½®

3. éƒ¨ç½²å’Œæ¶æ„
   - DEPLOYMENT.md - éƒ¨ç½²æŒ‡å—
   - ARCHITECTURE.md - æ¶æ„æ–‡æ¡£
   - PROJECT_SUMMARY.md - é¡¹ç›®æ€»ç»“

4. å¯¼èˆªå’Œç´¢å¼•
   - æ–‡æ¡£å¯¼èˆª.md - æ‰€æœ‰æ–‡æ¡£ç´¢å¼•
   - ä½¿ç”¨è¯´æ˜.md - ä¸­æ–‡ä½¿ç”¨æ•™ç¨‹

=================================================================
ğŸŒ æœåŠ¡è®¿é—®
=================================================================

å¯åŠ¨åå¯è®¿é—®ï¼š

- åç«¯ APIï¼š        http://localhost:8000
- API æ–‡æ¡£ï¼š        http://localhost:8000/docs
- å¤‡ç”¨æ–‡æ¡£ï¼š        http://localhost:8000/redoc
- å¥åº·æ£€æŸ¥ï¼š        http://localhost:8000/api/health
- å‰ç«¯ç•Œé¢ï¼š        http://localhostï¼ˆå¦‚æœå¯åŠ¨äº†frontendï¼‰

æ•°æ®åº“è¿æ¥ï¼š

- MySQLï¼š           localhost:3306
  ç”¨æˆ·åï¼šcombo_user
  å¯†ç ï¼šcombo_password
  æ•°æ®åº“ï¼šcombo_db

- Redisï¼š           localhost:6379

=================================================================
ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤
=================================================================

æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š
   docker-compose -f docker-compose.ghcr.yml ps

æŸ¥çœ‹æ—¥å¿—ï¼š
   docker-compose -f docker-compose.ghcr.yml logs -f backend

é‡å¯æœåŠ¡ï¼š
   docker-compose -f docker-compose.ghcr.yml restart backend

åœæ­¢æœåŠ¡ï¼š
   docker-compose -f docker-compose.ghcr.yml down

æ›´æ–°é•œåƒï¼š
   docker-compose -f docker-compose.ghcr.yml pull
   docker-compose -f docker-compose.ghcr.yml up -d

=================================================================
ğŸ› æ•…éšœæ’é™¤
=================================================================

1. å®¹å™¨æ— æ³•å¯åŠ¨
   - æŸ¥çœ‹æ—¥å¿—ï¼šdocker logs <å®¹å™¨å>
   - æ£€æŸ¥ç«¯å£ï¼šlsof -i :8000

2. æ•°æ®åº“è¿æ¥å¤±è´¥
   - ç­‰å¾…MySQLå¯åŠ¨ï¼šdocker logs mysql | grep "ready"
   - é‡å¯åç«¯ï¼šdocker restart backend

3. é•œåƒæ‹‰å–å¤±è´¥
   - æ£€æŸ¥ç½‘ç»œï¼šping ghcr.io
   - æ£€æŸ¥è®¤è¯ï¼šdocker login ghcr.io

4. æ›´å¤šé—®é¢˜
   - æŸ¥çœ‹ï¼šQUICK_START.md çš„æ•…éšœæ’é™¤ç« èŠ‚
   - æŸ¥çœ‹ï¼šDOCKERé•œåƒä½¿ç”¨æŒ‡å—.md çš„æ•…éšœæ’é™¤ç« èŠ‚

=================================================================
ğŸ“ è·å–å¸®åŠ©
=================================================================

1. æŸ¥çœ‹æ–‡æ¡£å¯¼èˆªï¼šæ–‡æ¡£å¯¼èˆª.md
2. æŸ¥çœ‹APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
3. æäº¤Issueï¼šhttps://github.com/<ä½ çš„ä»“åº“>/issues
4. æŸ¥çœ‹æ—¥å¿—ï¼šdocker-compose logs -f

=================================================================
ğŸ‰ å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
=================================================================

# 1. å‡†å¤‡é…ç½®æ–‡ä»¶
cat > docker-compose.ghcr.yml << 'EOF'
# ä»é¡¹ç›®å¤åˆ¶å®Œæ•´çš„ docker-compose.ghcr.yml å†…å®¹
# å¹¶å°† <YOUR_GITHUB_USERNAME> æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·å
EOF

# 2. å¯åŠ¨æœåŠ¡
docker-compose -f docker-compose.ghcr.yml up -d

# 3. æŸ¥çœ‹çŠ¶æ€
docker-compose -f docker-compose.ghcr.yml ps

# 4. æµ‹è¯•API
curl http://localhost:8000/api/health/ping

# 5. è®¿é—®æ–‡æ¡£
# æ‰“å¼€æµè§ˆå™¨ï¼šhttp://localhost:8000/docs

=================================================================

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸš€

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š
- æ–‡æ¡£å¯¼èˆª.md - å®Œæ•´çš„æ–‡æ¡£ç´¢å¼•
- DOCKERé•œåƒä½¿ç”¨æŒ‡å—.md - è¯¦ç»†çš„é•œåƒä½¿ç”¨è¯´æ˜

=================================================================
